package org.betonquest.betonquest.api.quest.npc.feature;

import org.betonquest.betonquest.api.QuestException;
import org.betonquest.betonquest.api.logger.BetonQuestLogger;
import org.betonquest.betonquest.api.profile.OnlineProfile;
import org.betonquest.betonquest.api.quest.npc.Npc;
import org.betonquest.betonquest.config.PluginMessage;
import org.betonquest.betonquest.conversation.Conversation;
import org.betonquest.betonquest.conversation.ConversationID;
import org.bukkit.Location;

/**
 * Represents a conversation with Npc.
 *
 * @param <T> the original npc type
 */
public class NpcConversation<T> extends Conversation {

    /**
     * Npc used in this Conversation.
     */
    private final Npc<T> npc;

    /**
     * Starts a new conversation between player and npc at given location.
     *
     * @param log            the logger that will be used for logging
     * @param pluginMessage  the {@link PluginMessage} instance
     * @param onlineProfile  the profile of the player
     * @param conversationID ID of the conversation
     * @param center         location where the conversation has been started
     * @param endCallable    the callable that removes the conversation from the active ones
     * @param npc            the Npc used for this conversation
     * @throws QuestException when required conversation objects could not be created
     */
    public NpcConversation(final BetonQuestLogger log, final PluginMessage pluginMessage, final OnlineProfile onlineProfile, final ConversationID conversationID,
                           final Location center, final Runnable endCallable, final Npc<T> npc) throws QuestException {
        super(log, pluginMessage, onlineProfile, conversationID, center, endCallable);
        this.npc = npc;
    }

    /**
     * This will return the Npc associated with this conversation.
     *
     * @return the BetonQuest Npc
     */
    public Npc<T> getNPC() {
        return npc;
    }
}
